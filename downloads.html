<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Official IGSTC Workshop 2025 - A professional conference for experts.">
    <meta name="robots" content="index, follow">
    <meta name="author" content="IGSTC Conference Team">
    <meta name="keywords" content="IGSTC, Workshop 2025, AI, Sustainability, Networking">

    <title>PPTs & Photos | IGSTC Bi-Lateral Workshop 2025</title>

    <!-- External Styles -->
    <link rel="stylesheet" href="assets/css/header.css">
    <link rel="stylesheet" href="assets/css/footer.css">
    <link rel="stylesheet" href="assets/css/downloads.css">
</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="header-left">
            <a href="https://iisc.ac.in/" target="_blank"><img src="assets/logo/IISC_logo.png" alt="IISc"></a>
            <a href="index.html"><img src="assets/logo/IGSTC_logo.png" alt="IGSTC"></a>
            <a href="https://www.uni-koeln.de/en/" target="_blank"><img src="assets/logo/universityofcologne.png" alt="University Of Cologne "></a>
        </div>
        <nav class="header-right">
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="speakers.html">Speakers</a></li>
                <li><a href="invitees.html">Invitees</a></li>
                <li><a href="agenda.html">Agenda</a></li>
                <li><a href="venue.html">Venue</a></li>
                <li><a href="contact.html">Contact</a></li>
                <li><a href="downloads.html" class="active">PPTs & Photos</a></li>
            </ul>
        </nav>
    </header>

    <!-- Page Title -->
    <h2>Download Conference Files</h2>

    <!-- PPT Downloads Section -->
    <br><h4>Download Speaker PPTs</h4>
    <div id="ppts-container" class="grid-container">
        <!-- PPT links will be dynamically inserted here -->
    </div>

    <!-- Photos Download Section -->
    <h4>Download Event Photos</h4>
    <br><a target="_blank" href="https://indianinstituteofscience-my.sharepoint.com/:f:/g/personal/rohanhs_iisc_ac_in/EnHKaOLN7NxIgyxKSB0OsIkBOGaq7A-mIKLZZqd7AxdlBw?e=nM7ruo" class="download-btn">Download Photos</a>

    <br><h4>Field Trip Photos</h4>

<!-- Image Carousel -->
    <div class="carousel-container">
        <div class="carousel" id="photo-carousel">
            <!-- Images will be inserted dynamically here -->
        </div>
        <!-- Carousel Navigation -->
        <button class="carousel-btn prev" onclick="changeSlide(-1)">❮</button>
        <button class="carousel-btn next" onclick="changeSlide(1)">❯</button>
    </div>

    <!-- Lightbox for Enlarged Image -->
    <div id="lightbox" class="lightbox">
        <div class="lightbox-header">
            <a id="download-btn" href="#" download class="download-lightbox">Download</a>
            <span class="close-lightbox">&times;</span>
        </div>
        <img id="lightbox-image" src="" alt="Full Image">
    </div>
    


    <!-- JavaScript for PPTs & Field Trip Photos -->
    <script>
        async function fetchDownloads() {
            try {
                // ✅ Fetch PPTs
                const pptResponse = await fetch("https://igstc-backend.onrender.com/api/downloads/ppts/");
                if (!pptResponse.ok) throw new Error("Failed to fetch PPTs");

                const pptData = await pptResponse.json();
                const pptContainer = document.getElementById("ppts-container");

                if (!pptData.ppts || pptData.ppts.length === 0) {
                    pptContainer.innerHTML = "<p>No PPTs available for download.</p>";
                } else {
                    pptData.ppts.forEach(ppt => {
                        const div = document.createElement("div");
                        div.className = "ppt-item";

                        const a = document.createElement("a");
                        a.href = ppt.url;
                        a.textContent = ppt.name;
                        a.download = ppt.name;

                        div.appendChild(a);
                        pptContainer.appendChild(div);
                    });
                }

                // ✅ Fetch Field Trip Photos & Create Carousel
                const photoContainer = document.getElementById("photo-carousel");
                const totalPhotos = 42;
                const imagePath = "assets/images/field-trip/";

                for (let i = 1; i <= totalPhotos; i++) {
                    const img = document.createElement("img");
                    img.src = `${imagePath}photo${i}.jpg`;
                    img.className = "carousel-image";
                    img.alt = `Field Trip Photo ${i}`;
                    img.setAttribute("data-index", i - 1); // Store index for navigation

                    // Open Lightbox When Clicked
                    img.addEventListener("click", function () {
                        openLightbox(img.src, i - 1);
                    });

                    photoContainer.appendChild(img);
                }
            } catch (error) {
                console.error("❌ Error:", error);
                document.getElementById("ppts-container").innerHTML = "<p>Error loading PPTs. Please try again later.</p>";
                document.getElementById("photo-gallery").innerHTML = "<p>Error loading photos. Please try again later.</p>";
            }
        }

        // ✅ Lightbox Functionality
        let currentIndex = 0;
        const totalPhotos = 42;
        const imagePath = "assets/images/field-trip/";

        function openLightbox(src, index) {
            currentIndex = index;
            document.getElementById("lightbox").style.display = "flex";
            document.getElementById("lightbox-image").src = src;
            document.getElementById("download-btn").href = src;
            document.getElementById("download-btn").setAttribute("download", `FieldTripPhoto${index + 1}.jpg`);
        }

        // ✅ Navigate Lightbox Left/Right
        function changeSlide(direction) {
            currentIndex += direction;
            if (currentIndex < 0) {
                currentIndex = totalPhotos - 1;
            } else if (currentIndex >= totalPhotos) {
                currentIndex = 0;
            }
            document.getElementById("lightbox-image").src = `${imagePath}photo${currentIndex + 1}.jpg`;
            document.getElementById("download-btn").href = `${imagePath}photo${currentIndex + 1}.jpg`;
            document.getElementById("download-btn").setAttribute("download", `FieldTripPhoto${currentIndex + 1}.jpg`);
        }

        // ✅ Close Lightbox
        document.querySelector(".close-lightbox").addEventListener("click", function () {
            document.getElementById("lightbox").style.display = "none";
        });

        // ✅ Fetch and Display Files on Page Load
        fetchDownloads();

    </script>

    <br><br>
    <footer>
        <p>&copy; 2025 IGSTC Conference | All rights reserved.</p>
    </footer>
</body>
</html>
